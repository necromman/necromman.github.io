<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="icon" type="image/svg+xml" href="../../favicon.svg">
<title>같은 네트워크, 제각각의 역할 — Editorial</title>
<meta name="description" content="Proxmox 위에 Traefik, GitLab, Consul 클러스터, ClickHouse까지. 192.168.0.x 대역의 사내 인프라 서비스 구성도와 각 VM의 역할을 한눈에 정리한 해설.">
<link rel="canonical" href="https://necromman.github.io/editorial/content/server-infra-guide-series/server-infra-overview.html">
<meta property="og:type" content="article">
<meta property="og:title" content="같은 네트워크, 제각각의 역할">
<meta property="og:description" content="Proxmox 위에 Traefik, GitLab, Consul 클러스터, ClickHouse까지. 192.168.0.x 대역의 사내 인프라 서비스 구성도와 각 VM의 역할을 한눈에 정리한 해설.">
<meta property="og:url" content="https://necromman.github.io/editorial/content/server-infra-guide-series/server-infra-overview.html">
<meta property="og:locale" content="ko_KR">
<meta property="og:site_name" content="Editorial">
<meta property="article:published_time" content="2026-02-09">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="같은 네트워크, 제각각의 역할">
<meta name="twitter:description" content="Proxmox 위에 Traefik, GitLab, Consul 클러스터, ClickHouse까지. 192.168.0.x 대역의 사내 인프라 서비스 구성도와 각 VM의 역할을 한눈에 정리한 해설.">
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"Article","headline":"같은 네트워크, 제각각의 역할","description":"Proxmox 위에 Traefik, GitLab, Consul 클러스터, ClickHouse까지. 192.168.0.x 대역의 사내 인프라 서비스 구성도와 각 VM의 역할을 한눈에 정리한 해설.","datePublished":"2026-02-09","dateModified":"2026-02-09","publisher":{"@type":"Organization","name":"Editorial"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://necromman.github.io/editorial/content/server-infra-guide-series/server-infra-overview.html"}}
</script>
<link rel="preload" href="../../assets/fonts/source-serif-4-latin-wght-normal.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/variable/pretendardvariable-dynamic-subset.min.css">
<link rel="stylesheet" href="../../assets/editorial-base.css">
<script>(function(){var t=localStorage.getItem('editorial-theme');if(!t)t=window.matchMedia('(prefers-color-scheme:dark)').matches?'dark':'light';document.documentElement.setAttribute('data-theme',t)})()</script>
<style>
  .masthead .deck { max-width: 560px; }

  /* SERVER CARD */
  .server-card {
    background: var(--card-bg);
    border: 1px solid var(--rule);
    padding: 28px 24px;
    margin: 24px 0;
  }
  .server-card .sv-header {
    display: flex;
    justify-content: space-between;
    align-items: baseline;
    margin-bottom: 16px;
    padding-bottom: 12px;
    border-bottom: 2px solid var(--fg);
  }
  .server-card .sv-name {
    font-size: 1.1rem;
    font-weight: 700;
    color: var(--fg);
  }
  .server-card .sv-ip {
    font-family: var(--mono);
    font-size: 0.76rem;
    color: var(--accent);
    font-weight: 600;
  }
  .server-card .sv-user {
    font-family: var(--mono);
    font-size: 0.7rem;
    color: var(--muted);
    margin-bottom: 12px;
    display: block;
  }
  .server-card .sv-desc {
    font-size: 0.92rem;
    line-height: 1.85;
    color: var(--prose);
  }
  .server-card .sv-desc strong {
    color: var(--fg);
    font-weight: 700;
  }

  /* INFRA MAP */
  .infra-map {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1px;
    background: var(--rule);
    border: 1px solid var(--rule);
    margin: 40px 0 48px;
  }
  .infra-map .im-cell {
    background: var(--bg);
    padding: 24px 20px;
  }
  .infra-map .im-ip {
    font-family: var(--mono);
    font-size: 0.7rem;
    color: var(--accent);
    font-weight: 700;
    display: block;
    margin-bottom: 4px;
  }
  .infra-map .im-name {
    font-size: 0.95rem;
    font-weight: 700;
    color: var(--fg);
    display: block;
    margin-bottom: 6px;
  }
  .infra-map .im-role {
    font-size: 0.82rem;
    color: var(--secondary);
    line-height: 1.6;
  }

  /* RELATION FLOW */
  .relation-flow {
    text-align: center;
    padding: 20px 0;
    font-family: var(--mono);
    font-size: 0.85rem;
    color: var(--muted);
  }

  @media (max-width: 700px) {
    .infra-map { grid-template-columns: 1fr; }
    .server-card .sv-header { flex-direction: column; gap: 4px; }
  }
</style>
<script src="../../assets/nav.js" defer></script>
<script src="../../assets/series-nav.js" defer></script>
<script src="../../assets/theme-toggle.js" defer></script>
</head>
<body>
<div class="page">

  <header class="masthead">
    <div class="issue">server infra guide series — article 01</div>
    <h1>같은 네트워크,<br><strong>제각각의 역할</strong></h1>
    <p class="deck">192.168.0.x 대역, 하나의 물리 서버 위에 여러 VM이 올라간다. Proxmox가 가상 머신을 만들고, Traefik이 문을 지키고, Consul이 서로를 찾아주고, GitLab이 코드를 품는다. 개발자 서버는 필요할 때 생성된다.</p>
  </header>

  <!-- PART I -->
  <section>
    <div class="section-head">
      <span class="num">Part I</span>
      <h2>전체 구성도</h2>
    </div>

    <p class="prose">사내 인프라는 크게 <strong>인프라 서비스</strong>와 <strong>개발자 서버</strong>로 나뉜다. 인프라 서비스는 운영의 뼈대다. 가상화, 라우팅, 코드 저장소, 서비스 디스커버리, 분석 데이터베이스까지 각각 전용 VM에서 하나의 역할만 담당한다. 개발자 서버는 인원이 합류할 때마다 Proxmox에서 VM을 생성하여 할당하는 구조다.</p>

    <p class="prose">이 구조를 이해하지 못하면 자기 서버에 Traefik을 설치하거나, Consul에 직접 서비스를 등록하거나, SSL 인증서를 중복 발급하는 실수를 저지르게 된다. 각 서비스가 어떻게 연결되어 있는지 먼저 파악해야 한다.</p>

    <div style="font-family:var(--serif);font-size:0.8rem;letter-spacing:2px;color:var(--muted);font-weight:700;margin:48px 0 16px">인프라 서버</div>

    <div class="infra-map">
      <div class="im-cell">
        <span class="im-ip">192.168.0.104</span>
        <span class="im-name">Proxmox</span>
        <span class="im-role">가상화 플랫폼. 모든 VM의 호스트.</span>
      </div>
      <div class="im-cell">
        <span class="im-ip">192.168.0.230</span>
        <span class="im-name">Traefik</span>
        <span class="im-role">리버스 프록시. 인프라의 관문.</span>
      </div>
      <div class="im-cell">
        <span class="im-ip">192.168.0.231</span>
        <span class="im-name">Ax-Connect</span>
        <span class="im-role">사내 서비스 연동.</span>
      </div>
      <div class="im-cell">
        <span class="im-ip">192.168.0.232</span>
        <span class="im-name">GitLab</span>
        <span class="im-role">Private 코드 저장소.</span>
      </div>
      <div class="im-cell">
        <span class="im-ip">192.168.0.233 ~ 235</span>
        <span class="im-name">Consul 01 / 02 / 03</span>
        <span class="im-role">서비스 디스커버리 클러스터.</span>
      </div>
      <div class="im-cell">
        <span class="im-ip">192.168.0.236</span>
        <span class="im-name">ClickHouse</span>
        <span class="im-role">분석용 컬럼형 데이터베이스.</span>
      </div>
    </div>

    <div style="font-family:var(--serif);font-size:0.8rem;letter-spacing:2px;color:var(--muted);font-weight:700;margin:48px 0 16px">개발자 서버 (Proxmox에서 동적 할당)</div>

    <div class="infra-map">
      <div class="im-cell">
        <span class="im-ip">192.168.0.202</span>
        <span class="im-name">Chris Private Server</span>
        <span class="im-role">개인 개발/테스트 환경.</span>
      </div>
      <div class="im-cell">
        <span class="im-ip">192.168.0.203</span>
        <span class="im-name">Lucy Private Server</span>
        <span class="im-role">개인 개발/테스트 환경.</span>
      </div>
      <div class="im-cell">
        <span class="im-ip">192.168.0.204</span>
        <span class="im-name">Evan Private Server</span>
        <span class="im-role">개인 개발/테스트 환경.</span>
      </div>
      <div class="im-cell" style="background:var(--card-bg)">
        <span class="im-ip" style="color:var(--muted)">192.168.0.2xx</span>
        <span class="im-name" style="color:var(--muted)">+N</span>
        <span class="im-role">인원 합류 시 Proxmox에서 VM 생성 후 할당.</span>
      </div>
    </div>
  </section>

  <!-- PART II -->
  <section>
    <div class="section-head">
      <span class="num">Part II</span>
      <h2>인프라 서버 — 각자의 역할</h2>
    </div>

    <div class="server-card">
      <div class="sv-header">
        <span class="sv-name">Proxmox</span>
        <span class="sv-ip">192.168.0.104</span>
      </div>
      <span class="sv-user">user: root</span>
      <div class="sv-desc">
        <strong>가상화 플랫폼이다.</strong> 물리 서버 위에서 가상 머신(VM)을 생성하고 관리한다. 인프라 서비스와 개발자 서버 모두 이 Proxmox 위에서 돌아가는 VM이다. 신규 인원이 합류하면 여기서 VM을 새로 만들어 개발자 서버를 할당한다. 개발자가 직접 접근할 일은 거의 없다. VM 생성, 스냅샷, 리소스 할당은 인프라 관리자의 영역이다.
      </div>
    </div>

    <div class="server-card">
      <div class="sv-header">
        <span class="sv-name">Traefik</span>
        <span class="sv-ip">192.168.0.230</span>
      </div>
      <span class="sv-user">user: traefik</span>
      <div class="sv-desc">
        <strong>리버스 프록시이자 로드 밸런서다.</strong> 인프라의 관문(Gateway) 역할을 수행한다. 외부에서 들어오는 모든 요청은 이 서버를 거쳐 각 백엔드로 분배된다. SSL 인증서 자동 발급, 도메인 기반 라우팅, 미들웨어 처리를 담당한다. 이 서버가 멈추면 모든 서비스에 접근할 수 없다.
      </div>
    </div>

    <div class="server-card">
      <div class="sv-header">
        <span class="sv-name">Ax-Connect</span>
        <span class="sv-ip">192.168.0.231</span>
      </div>
      <span class="sv-user">user: axconnect</span>
      <div class="sv-desc">
        사내 서비스 연동을 처리하는 서버다. 외부 API 연동, 내부 시스템 간 통신 허브 역할을 수행한다.
      </div>
    </div>

    <div class="server-card">
      <div class="sv-header">
        <span class="sv-name">Private GitLab</span>
        <span class="sv-ip">192.168.0.232</span>
      </div>
      <span class="sv-user">user: gitlab</span>
      <div class="sv-desc">
        <strong>사내 코드 저장소다.</strong> 모든 프로젝트의 Git 리포지토리, CI/CD 파이프라인, 코드 리뷰가 이 서버에서 돌아간다. Traefik이 <code>gitlab.yourdomain.com</code>으로 들어오는 요청을 이 서버로 라우팅한다.
      </div>
    </div>

    <div class="server-card">
      <div class="sv-header">
        <span class="sv-name">Consul 클러스터</span>
        <span class="sv-ip">192.168.0.233 ~ 235</span>
      </div>
      <span class="sv-user">user: consul</span>
      <div class="sv-desc">
        <strong>서비스 디스커버리 클러스터다.</strong> 3대로 구성된 고가용성(HA) 클러스터. 새로운 서비스가 뜨면 Consul에 자동 등록되고, Traefik이 이를 감지하여 라우팅 규칙을 자동 생성한다. 3대 중 1대가 죽어도 나머지 2대가 동작을 이어간다(Raft 합의 알고리즘).
      </div>
    </div>

    <div class="server-card">
      <div class="sv-header">
        <span class="sv-name">ClickHouse</span>
        <span class="sv-ip">192.168.0.236</span>
      </div>
      <span class="sv-user">user: clickhouse</span>
      <div class="sv-desc">
        <strong>분석용 컬럼형 데이터베이스다.</strong> 로그 분석, 사용자 행동 분석, 실시간 집계 쿼리에 특화되어 있다. 일반 OLTP 데이터베이스(PostgreSQL, MySQL)와 다르게 대량 데이터의 집계 연산에서 압도적인 성능을 발휘한다.
      </div>
    </div>
  </section>

  <!-- PART III -->
  <section>
    <div class="section-head">
      <span class="num">Part III</span>
      <h2>서버 간 관계 — 트래픽은 이렇게 흐른다</h2>
    </div>

    <p class="prose">서버들은 고립되어 있지 않다. <strong>Traefik이 모든 외부 요청을 받아 각 서버로 분배</strong>하고, <strong>Consul이 서비스의 위치를 알려주며</strong>, <strong>Proxmox가 모든 VM의 자원을 관리</strong>한다. 이 관계를 도식화하면 다음과 같다.</p>

    <div class="mechanism-row">
      <div class="mechanism">
        <div class="m-label">01</div>
        <h3>외부 요청 진입</h3>
        <p>사용자 또는 외부 시스템이 도메인으로 접속한다. 모든 요청은 <strong>Traefik(230)</strong>을 거친다.</p>
      </div>
      <div class="mechanism">
        <div class="m-label">02</div>
        <h3>라우팅 결정</h3>
        <p>Traefik이 도메인과 경로를 확인하고 <strong>Consul(233~235)</strong>에서 서비스 위치를 조회한다.</p>
      </div>
      <div class="mechanism">
        <div class="m-label">03</div>
        <h3>백엔드 전달</h3>
        <p>GitLab(232), Ax-Connect(231), 개발자 서버(202~204) 등 <strong>해당 서비스</strong>로 요청이 전달된다.</p>
      </div>
    </div>

    <p class="prose">개발자 서버(202~204)도 이 흐름 안에 있다. 개발 중인 서비스를 외부에 노출하려면 Traefik에 라우팅 규칙을 추가해야 한다. 자기 서버에 별도 프록시를 설치하는 것이 아니다.</p>

    <div class="pull-quote">
      <p>모든 트래픽은 <strong>하나의 문</strong>을 지난다.<br>그 문이 Traefik이다.</p>
    </div>
  </section>

  <!-- WARNING -->
  <div class="warning-box">
    <div class="w-title">개발자가 반드시 알아야 할 것</div>
    <ol class="warning-list">
      <li>인프라 서버(230~236)에 SSH 접속하거나 설정을 변경하지 않는다</li>
      <li>Proxmox(104)에 직접 접근하지 않는다 — VM 생성/변경은 인프라 관리자에게 요청한다</li>
      <li>Consul에 서비스를 직접 등록하지 않는다 — Docker 라벨이나 설정 파일로 자동 등록되는 구조다</li>
      <li>새 서비스의 외부 접근이 필요하면 Traefik 라우팅 규칙 추가를 요청한다</li>
      <li>개발자 서버는 개인 개발/테스트 전용이다 — 운영 서비스를 올리지 않는다</li>
    </ol>
  </div>

  <!-- CLOSING -->
  <div class="closing">
    <h2>VM은 늘어나도<br><strong>구조는 하나다</strong></h2>
    <p class="sub">Proxmox가 VM을 만들고, 각 VM이 하나의 역할을 맡는다. 이 구조를 이해하면 잘못된 설정으로 인프라를 흔드는 실수를 피할 수 있다.</p>
  </div>

  <footer class="footer">
    <p>Sources: Proxmox VE Documentation &middot; Traefik Official Docs &middot; HashiCorp Consul Architecture</p>
    <p>Research assisted by Claude &middot; 2026</p>
  </footer>

</div>
</body>
</html>
