<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="icon" type="image/svg+xml" href="../../favicon.svg">
<title>GitLab 서버 이사 — 정석은 이렇다 — Editorial</title>
<meta name="description" content="NAS GitLab의 한계부터 backup/restore 정석, DNS 도메인 전략, 4주 마이그레이션 플랜까지. 아무도 눈치채지 못하게 끝내는 서버 이전의 정석.">
<link rel="canonical" href="https://necromman.github.io/editorial/content/gitlab-migration-series/gitlab-migration-the-right-way.html">
<meta property="og:type" content="article">
<meta property="og:title" content="GitLab 서버 이사 — 정석은 이렇다">
<meta property="og:description" content="NAS GitLab의 한계부터 backup/restore 정석, DNS 도메인 전략, 4주 마이그레이션 플랜까지. 아무도 눈치채지 못하게 끝내는 서버 이전의 정석.">
<meta property="og:url" content="https://necromman.github.io/editorial/content/gitlab-migration-series/gitlab-migration-the-right-way.html">
<meta property="og:locale" content="ko_KR">
<meta property="og:site_name" content="Editorial">
<meta property="article:published_time" content="2026-02-09">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="GitLab 서버 이사 — 정석은 이렇다">
<meta name="twitter:description" content="NAS GitLab의 한계부터 backup/restore 정석, DNS 도메인 전략, 4주 마이그레이션 플랜까지. 아무도 눈치채지 못하게 끝내는 서버 이전의 정석.">
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"Article","headline":"GitLab 서버 이사 — 정석은 이렇다","description":"NAS GitLab의 한계부터 backup/restore 정석, DNS 도메인 전략, 4주 마이그레이션 플랜까지. 아무도 눈치채지 못하게 끝내는 서버 이전의 정석.","datePublished":"2026-02-09","dateModified":"2026-02-09","publisher":{"@type":"Organization","name":"Editorial"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://necromman.github.io/editorial/content/gitlab-migration-series/gitlab-migration-the-right-way.html"}}
</script>
<link rel="preload" href="../../assets/fonts/source-serif-4-latin-wght-normal.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/variable/pretendardvariable-dynamic-subset.min.css">
<link rel="stylesheet" href="../../assets/editorial-base.css">
<style>
  .masthead .deck { max-width: 580px; }

  /* CODE BLOCK */
  .code-block {
    background: var(--card-bg);
    border: 1px solid var(--rule);
    padding: 20px 24px;
    font-family: var(--mono);
    font-size: 0.76rem;
    line-height: 1.75;
    overflow-x: auto;
    white-space: pre;
    margin: 24px 0;
    color: var(--prose);
    border-radius: 0;
  }
  .code-block .code-label {
    font-size: 0.6rem;
    letter-spacing: 3px;
    text-transform: uppercase;
    color: var(--accent);
    display: block;
    margin-bottom: 12px;
    font-weight: 700;
  }
  .code-block .code-comment {
    color: var(--muted);
  }

  /* 2-COLUMN GRID */
  .mechanism-2col {
    grid-template-columns: 1fr 1fr;
  }

  /* COMPARISON TABLE (4-column) */
  .compare-grid {
    display: grid;
    grid-template-columns: 140px 1fr 1fr 1fr;
    gap: 1px;
    background: var(--rule);
    border: 1px solid var(--rule);
    margin: 32px 0 40px;
  }
  .compare-grid .cg-head {
    background: var(--card-bg);
    padding: 16px 14px;
    font-family: var(--serif);
    font-size: 0.78rem;
    font-weight: 700;
    color: var(--fg);
  }
  .compare-grid .cg-cell {
    background: var(--bg);
    padding: 14px 14px;
    font-size: 0.82rem;
    color: var(--prose);
    line-height: 1.6;
  }
  .compare-grid .cg-label {
    background: var(--card-bg);
    padding: 14px 14px;
    font-size: 0.78rem;
    font-weight: 700;
    color: var(--fg);
  }

  /* TIMELINE */
  .timeline {
    margin: 40px 0 48px;
    list-style: none;
    background: var(--rule);
    border: 1px solid var(--rule);
    display: grid;
    gap: 1px;
  }
  .timeline li {
    display: grid;
    grid-template-columns: 100px 1fr;
    background: var(--bg);
  }
  .timeline .t-time {
    font-family: var(--mono);
    font-size: 0.8rem;
    font-weight: 700;
    color: var(--accent);
    padding: 20px 12px;
    text-align: right;
    background: var(--card-bg);
  }
  .timeline .t-desc {
    font-size: 0.92rem;
    color: var(--prose);
    line-height: 1.7;
    padding: 20px 24px;
  }
  .timeline .t-desc strong {
    font-weight: 700;
    color: var(--fg);
  }

  /* INLINE WARNING */
  .inline-warning {
    background: var(--card-bg);
    border-left: 3px solid var(--accent);
    padding: 16px 20px;
    margin: 24px 0;
    font-size: 0.9rem;
    color: var(--prose);
    line-height: 1.7;
  }
  .inline-warning strong {
    font-weight: 700;
    color: var(--fg);
  }

  @media (max-width: 700px) {
    .mechanism-2col { grid-template-columns: 1fr; }
    .timeline li { grid-template-columns: 72px 1fr; }
    .timeline .t-time { padding: 16px 8px; font-size: 0.75rem; }
    .timeline .t-desc { padding: 16px; }
    .compare-grid { grid-template-columns: 1fr 1fr; }
  }
</style>
<script src="../../assets/nav.js" defer></script>
<script src="../../assets/series-nav.js?v=14" defer></script>
</head>
<body>
<div class="page">

  <article>
    <header class="masthead">
      <div class="issue">gitlab migration series &mdash; article 02</div>
      <h1>GitLab <strong>서버 이사</strong><br>정석은 이렇다</h1>
      <p class="deck">NAS의 한계를 벗어나 전용 서버로. 백업부터 복원, 도메인 전략까지 &mdash; 아무도 눈치채지 못하게 끝내는 마이그레이션의 정석.</p>
    </header>

    <main>

      <!-- PART I -->
      <section>
        <div class="section-head">
          <span class="num">part i &mdash; why move</span>
          <h2>NAS에서 GitLab을 돌리면 안 되는 이유</h2>
        </div>

        <p class="prose">
          시놀로지 NAS에서 Docker로 GitLab을 돌리는 것은 한국 중소/스타트업에서 흔한 패턴이다. 초기에는 잘 돌아간다. NAS는 이미 사무실에 있고, Docker 패키지 하나 설치하면 끝이니까. 하지만 팀이 커지고 프로젝트가 늘면 한계에 부딪힌다. 그리고 그 한계는 대부분 동시에 온다.
        </p>

        <div class="mechanism-row">
          <div class="mechanism">
            <div class="m-label">limitation 01</div>
            <h3>메모리 벽</h3>
            <p>GitLab은 유휴 상태에서도 약 <strong>2.2GB RAM</strong>을 점유한다. NAS 기본 2GB로는 부팅조차 위태롭다. GitLab 공식 최소 권장은 8 vCPU, 16GB RAM(1,000 유저 기준). DS220+의 2코어/2GB는 사실상 데모 수준이다.</p>
          </div>
          <div class="mechanism">
            <div class="m-label">limitation 02</div>
            <h3>DSM 7.0 지원 중단</h3>
            <p>시놀로지가 DSM 7.0에서 GitLab 패키지를 <strong>3rd-party로 분류</strong>하고 지원을 중단했다. Docker로 직접 설치해야 하므로 유지보수 난이도가 급상승한다. 업데이트도, 트러블슈팅도 전부 수동이다.</p>
          </div>
          <div class="mechanism">
            <div class="m-label">limitation 03</div>
            <h3>성능 저하</h3>
            <p>데이터가 쌓이면 <strong>CI/CD 파이프라인이 느려지고</strong>, 접속이 끊기고, 502 에러가 빈번해진다. NAS의 ARM 또는 저전력 x86 CPU로는 GitLab의 Ruby on Rails + PostgreSQL + Redis 스택을 감당하기 어렵다.</p>
          </div>
        </div>

        <div class="pull-quote">
          <p>NAS는 파일 서버다. Git 서버가 아니다.</p>
        </div>

        <p class="prose">
          전용 서버(4코어+ x86, 16GB+ RAM)로의 이전은 올바른 판단이다. 문제는 "어떻게" 옮기느냐다. 마이그레이션 방법을 잘못 고르면 데이터가 날아가고, 도메인 전략을 잘못 잡으면 개발자 전원이 remote를 다시 설정해야 한다. 이 글에서 정석을 다룬다.
        </p>
      </section>

      <!-- PART II -->
      <section>
        <div class="section-head">
          <span class="num">part ii &mdash; three methods</span>
          <h2>마이그레이션 3가지 방법</h2>
        </div>

        <div class="technique">
          <div class="technique-header">
            <span class="t-num">01</span>
            <h3>gitlab-backup (공식 권장)</h3>
          </div>
          <div class="t-sub">리포지토리, 이슈, MR, CI/CD 설정, 위키, 스니펫 등 거의 모든 데이터를 한 번에 백업/복원</div>
          <div class="t-body">
            <p>GitLab 공식 문서가 권장하는 방법이다. <strong>gitlab-backup create</strong> 명령 하나로 리포지토리, 이슈, 머지 리퀘스트, CI/CD 파이프라인 설정, 위키, 스니펫을 포함한 거의 모든 데이터를 tar 파일로 묶는다. 단, <strong>gitlab.rb</strong>(설정 파일)와 <strong>gitlab-secrets.json</strong>(암호화 키)은 별도로 복사해야 한다. 이 두 파일이 없으면 2FA 토큰, CI/CD 변수 등 암호화된 데이터를 복호화할 수 없다.</p>
          </div>
        </div>

        <div class="code-block"><span class="code-label">gitlab-backup &mdash; backup &amp; restore</span>
<span class="code-comment"># 구 서버에서 백업 생성</span>
docker exec -t gitlab gitlab-backup create

<span class="code-comment"># 백업 파일 + 설정 파일 전송</span>
scp /srv/gitlab/data/backups/*_gitlab_backup.tar new-server:/srv/gitlab/data/backups/
scp /srv/gitlab/config/gitlab.rb new-server:/srv/gitlab/config/
scp /srv/gitlab/config/gitlab-secrets.json new-server:/srv/gitlab/config/

<span class="code-comment"># 신규 서버에서 복원</span>
docker exec -t gitlab gitlab-backup restore

<span class="code-comment"># 검증</span>
docker exec -t gitlab gitlab-rake gitlab:check SANITIZE=true
docker exec -t gitlab gitlab-rake gitlab:doctor:secrets</div>

        <div class="inline-warning">
          <strong>구 서버와 신 서버의 GitLab 버전이 반드시 동일해야 한다.</strong> 버전이 다르면 복원이 실패한다. 신 서버에 동일 버전을 설치한 뒤 복원하고, 이후 업그레이드하는 것이 정석이다.
        </div>

        <div class="technique">
          <div class="technique-header">
            <span class="t-num">02</span>
            <h3>Docker 볼륨 직접 이전</h3>
          </div>
          <div class="t-sub">backup 명령어 없이 파일 시스템 레벨에서 볼륨을 통째로 복사</div>
          <div class="t-body">
            <p>Docker Compose로 GitLab을 운영 중이라면 볼륨 자체를 tar로 묶어 옮기는 방법도 있다. <strong>/srv/gitlab/</strong> 디렉토리에 config, data, logs가 모두 들어 있으므로, 이 디렉토리만 아카이브하면 된다. GitLab 내부 백업 메커니즘을 거치지 않으므로 구조가 단순하다.</p>
          </div>
        </div>

        <div class="code-block"><span class="code-label">volume transfer &mdash; tar + rsync</span>
<span class="code-comment"># 구 서버 — GitLab 컨테이너 중지 후 볼륨 아카이브</span>
docker compose down
tar czf gitlab-volumes.tar.gz /srv/gitlab/

<span class="code-comment"># 신규 서버로 전송</span>
rsync -avz --progress gitlab-volumes.tar.gz new-server:/srv/

<span class="code-comment"># 신규 서버에서 압축 해제 + 컨테이너 기동</span>
tar xzf gitlab-volumes.tar.gz -C /
docker compose up -d</div>

        <div class="inline-warning">
          <strong>이 방법은 GitLab이 완전히 중지된 상태에서만 안전하다.</strong> 실행 중 복사하면 PostgreSQL DB 정합성이 깨질 수 있다. 반드시 <code style="font-family:var(--mono);font-size:0.76rem;color:var(--accent)">docker compose down</code>으로 컨테이너를 중지한 뒤 아카이브한다.
        </div>

        <div class="technique">
          <div class="technique-header">
            <span class="t-num">03</span>
            <h3>프로젝트 Export/Import</h3>
          </div>
          <div class="t-sub">프로젝트 단위로 내보내고 가져오는 방법. 소수의 프로젝트 선택적 이전에 적합</div>
          <div class="t-body">
            <p>GitLab 웹 UI에서 프로젝트별로 Export 파일을 생성하고, 신규 서버에서 Import하는 방법이다. 소수의 프로젝트만 선택적으로 옮길 때 유용하지만, 프로젝트가 수십 개를 넘으면 수작업이 비현실적이다. 그룹 단위 Export/Import는 Premium 라이선스 이상에서만 지원한다.</p>
          </div>
        </div>

        <p class="prose">
          세 가지 방법의 특성을 비교하면 다음과 같다. 대부분의 경우 <strong>gitlab-backup</strong>이 정답이다.
        </p>

        <div class="compare-grid">
          <div class="cg-head"></div>
          <div class="cg-head">gitlab-backup</div>
          <div class="cg-head">볼륨 직접 이전</div>
          <div class="cg-head">Export/Import</div>

          <div class="cg-label">데이터 범위</div>
          <div class="cg-cell">전체(리포, 이슈, CI 등)</div>
          <div class="cg-cell">전체(파일시스템)</div>
          <div class="cg-cell">프로젝트 단위</div>

          <div class="cg-label">다운타임</div>
          <div class="cg-cell">백업+복원 시간</div>
          <div class="cg-cell"><strong>컨테이너 중지 필수</strong></div>
          <div class="cg-cell">건별 처리</div>

          <div class="cg-label">난이도</div>
          <div class="cg-cell">중</div>
          <div class="cg-cell">하</div>
          <div class="cg-cell"><strong>상(대량 시)</strong></div>

          <div class="cg-label">권장 시나리오</div>
          <div class="cg-cell"><strong>대부분의 경우</strong></div>
          <div class="cg-cell">동일 OS/Docker 환경</div>
          <div class="cg-cell">선택적 이전</div>
        </div>
      </section>

      <!-- PART III -->
      <section>
        <div class="section-head">
          <span class="num">part iii &mdash; domain strategy</span>
          <h2>도메인은 어떻게 할 것인가</h2>
        </div>

        <p class="prose">
          마이그레이션에서 가장 많은 논쟁이 벌어지는 지점이다. 서버를 옮기면 IP가 바뀐다. 그런데 개발자들의 git remote에는 도메인(또는 IP)이 박혀 있다. CI/CD webhook, Container Registry, Slack 알림 &mdash; 전부 URL을 물고 있다. 도메인을 어떻게 처리하느냐에 따라 마이그레이션의 체감 난이도가 결정된다.
        </p>

        <div class="technique">
          <div class="technique-header">
            <span class="t-num">A</span>
            <h3>DNS만 바꾸기 (권장)</h3>
          </div>
          <div class="t-sub">기존 도메인 유지, DNS A 레코드만 신규 서버 IP로 변경</div>
          <div class="t-body">
            <p>가장 단순하고 안전한 방법이다. <strong>git.prost.team</strong> 도메인은 그대로 유지하되, DNS A 레코드의 IP만 신규 서버로 변경한다. 개발자는 아무것도 할 필요가 없다. git remote, CI/CD, webhook, Container Registry URL이 전부 그대로 작동한다.</p>
          </div>
        </div>

        <div class="code-block"><span class="code-label">dns a record &mdash; migration steps</span>
<span class="code-comment"># DNS 관리 콘솔에서:</span>
<span class="code-comment"># git.prost.team  A  (구 NAS IP) → (신 서버 IP)</span>

<span class="code-comment"># 마이그레이션 48시간 전: TTL을 300초(5분)로 낮춤</span>
<span class="code-comment"># 마이그레이션 당일: A 레코드 IP 변경</span>
<span class="code-comment"># TTL 5분이면 DNS 전파 5~30분 내 완료</span></div>

        <div class="mechanism-row mechanism-2col">
          <div class="mechanism">
            <div class="m-label">pros</div>
            <h3>장점</h3>
            <p><strong>개발자 작업 0건.</strong> 모든 remote, CI/CD, webhook, Container Registry가 그대로 작동한다. 롤백도 간단하다 &mdash; DNS를 원래 IP로 되돌리면 끝이다. 마이그레이션 당일 30분이면 전파가 완료된다.</p>
          </div>
          <div class="mechanism">
            <div class="m-label">cons</div>
            <h3>단점</h3>
            <p>prost.team 도메인의 <strong>DNS 관리 권한이 필요하다.</strong> 도메인 자체를 변경하려는 목적(리브랜딩 등)이 있다면 이 방법으로는 해결되지 않는다. 또한 IP 직접 접속으로 운영 중인 경우 별도 처리가 필요하다.</p>
          </div>
        </div>

        <div class="technique">
          <div class="technique-header">
            <span class="t-num">B</span>
            <h3>도메인 변경 (병행 운영)</h3>
          </div>
          <div class="t-sub">도메인을 반드시 바꿔야 한다면, 최소 2주간 구/신 도메인 병행 운영이 필수</div>
          <div class="t-body">
            <p>도메인 변경이 불가피하다면, 최소 2주간의 <strong>병행 운영 기간</strong>이 필요하다. 개발자들이 git remote를 변경하고, CI/CD 파이프라인을 수정하고, webhook URL을 업데이트해야 한다. 한 명이라도 놓치면 push가 실패한다. 병행 기간 없이 하루 아침에 바꾸는 것은 사고를 부르는 지름길이다.</p>
          </div>
        </div>

        <div style="font-family:var(--serif);font-size:0.8rem;letter-spacing:2px;color:var(--muted);font-weight:700;margin-bottom:16px">도메인 변경 타임라인</div>

        <ul class="timeline">
          <li>
            <span class="t-time">T-4주</span>
            <div class="t-desc"><strong>마이그레이션 계획 공지.</strong> 신규 도메인 안내, 변경 일정 공유.</div>
          </li>
          <li>
            <span class="t-time">T-2주</span>
            <div class="t-desc"><strong>개발자에게 remote 변경 스크립트 배포.</strong> 신 서버 테스트 환경 오픈.</div>
          </li>
          <li>
            <span class="t-time">T-1주</span>
            <div class="t-desc">양쪽 도메인 모두 접근 가능 상태 확인. <strong>병행 운영 시작.</strong></div>
          </li>
          <li>
            <span class="t-time">T-3일</span>
            <div class="t-desc">최종 리마인더. remote 미변경 개발자 개별 연락.</div>
          </li>
          <li>
            <span class="t-time">T-day</span>
            <div class="t-desc"><strong>금요일 저녁 마이그레이션 실행.</strong> 주말 동안 안정화 기간 확보.</div>
          </li>
          <li>
            <span class="t-time">T+1일</span>
            <div class="t-desc">관리자 팀 검증. push/pull/CI 파이프라인 정상 작동 확인.</div>
          </li>
          <li>
            <span class="t-time">T+1주</span>
            <div class="t-desc">구 도메인 <strong>301 리디렉트 설정.</strong> 웹 접근은 자동 전환.</div>
          </li>
          <li>
            <span class="t-time">T+2주</span>
            <div class="t-desc">안정화 확인 후 구 서버 <strong>read-only 유지.</strong> 즉시 폐기하지 않는다.</div>
          </li>
        </ul>

        <div class="technique">
          <div class="technique-header">
            <span class="t-num">C</span>
            <h3>리버스 프록시</h3>
          </div>
          <div class="t-sub">구 NAS에 nginx를 설치해 구 도메인 요청을 신 서버로 전달</div>
          <div class="t-body">
            <p>구 NAS에 nginx를 설치해 구 도메인으로 들어오는 요청을 신 도메인으로 리디렉트하는 방법이다. 웹 UI 접근은 해결된다. 하지만 <strong>SSH 기반 git 명령은 HTTP 리디렉트를 따르지 않는다.</strong> git clone, push, pull에서 SSH URL을 쓰는 개발자는 여전히 수동으로 remote를 변경해야 한다. 근본적 해결이 아니라 임시 조치에 가깝다.</p>
          </div>
        </div>

        <div class="pull-quote">
          <p>가장 좋은 마이그레이션은 아무도 모르게 끝나는 마이그레이션이다.</p>
        </div>

        <p class="prose">
          결론은 명확하다. 도메인을 바꿀 필요가 없다면 <strong>Option A(DNS만 변경)</strong>가 압도적으로 유리하다. 개발자가 해야 할 일이 문자 그대로 0건이다. 도메인 변경이 불가피하다면 Option B의 타임라인을 따르되, 구 도메인에서 신 도메인으로의 301 리디렉트와 병행 운영 기간을 반드시 확보한다.
        </p>
      </section>

      <!-- PART IV -->
      <section>
        <div class="section-head">
          <span class="num">part iv &mdash; the timeline</span>
          <h2>4주 마이그레이션 플랜</h2>
        </div>

        <p class="prose">
          마이그레이션 방법(gitlab-backup)과 도메인 전략(DNS A 레코드 변경)을 확정했다고 가정하고, 4주 플랜을 정리한다. 실행은 반드시 금요일 저녁에 시작하고, 토요일에 검증하고, 월요일에 지원하는 패턴을 따른다.
        </p>

        <div class="mechanism-row">
          <div class="mechanism">
            <div class="m-label">week 1</div>
            <h3>계획 수립 + 공지</h3>
            <p>마이그레이션 방법 결정, 도메인 전략 확정. 전사 공지: <strong>"아직 아무것도 바뀌지 않습니다."</strong> 연동 서비스 인벤토리 작성(Slack webhook, Jira 연동, CI Runner, Container Registry, Pages 등).</p>
          </div>
          <div class="mechanism">
            <div class="m-label">week 2</div>
            <h3>기술 준비</h3>
            <p>신 서버 세팅(OS, Docker, 동일 GitLab 버전 설치). <strong>테스트 백업/복원 1회 실행.</strong> 연동 서비스별 마이그레이션 체크리스트 확정. DNS TTL을 300초로 변경.</p>
          </div>
          <div class="mechanism">
            <div class="m-label">week 3</div>
            <h3>리허설</h3>
            <p><strong>스테이징 환경에서 전체 과정 시뮬레이션.</strong> 백업 생성 소요 시간, 전송 시간, 복원 시간 측정. 개발자 자발적 테스트 참여 &mdash; 신 서버에서 clone, push, CI 실행 확인.</p>
          </div>
        </div>

        <div style="font-family:var(--serif);font-size:0.8rem;letter-spacing:2px;color:var(--muted);font-weight:700;margin-bottom:16px">4주차 실행 타임라인</div>

        <ul class="timeline">
          <li>
            <span class="t-time">금 18:00</span>
            <div class="t-desc"><strong>유지보수 모드 진입.</strong> GitLab을 maintenance mode로 전환. 전사 Slack 알림.</div>
          </li>
          <li>
            <span class="t-time">금 18:30</span>
            <div class="t-desc"><strong>최종 백업 생성.</strong> <code style="font-family:var(--mono);font-size:0.8rem;color:var(--accent)">gitlab-backup create</code> + 설정 파일 복사.</div>
          </li>
          <li>
            <span class="t-time">금 19:00</span>
            <div class="t-desc">백업 파일 신 서버 전송. <strong>rsync로 진행 상태 모니터링.</strong></div>
          </li>
          <li>
            <span class="t-time">금 20:00</span>
            <div class="t-desc"><strong>신 서버에서 복원 실행.</strong> <code style="font-family:var(--mono);font-size:0.8rem;color:var(--accent)">gitlab-backup restore</code> + check + doctor:secrets 검증.</div>
          </li>
          <li>
            <span class="t-time">금 21:00</span>
            <div class="t-desc"><strong>DNS A 레코드 변경.</strong> TTL 300초 기준, 5~30분 내 전파 완료.</div>
          </li>
          <li>
            <span class="t-time">금 22:00</span>
            <div class="t-desc">관리자 접속 확인. 웹 UI, git clone, push 테스트. <strong>문제 없으면 퇴근.</strong></div>
          </li>
          <li>
            <span class="t-time">토 10:00</span>
            <div class="t-desc"><strong>전체 검증.</strong> CI/CD 파이프라인 실행, webhook 동작 확인, Container Registry 접근 테스트.</div>
          </li>
          <li>
            <span class="t-time">월 09:00</span>
            <div class="t-desc"><strong>개발자 출근 후 지원 대기.</strong> 문제 발생 시 즉시 대응. 구 서버는 1주간 read-only 유지.</div>
          </li>
        </ul>

        <div class="warning-box">
          <div class="w-title">마이그레이션 체크리스트</div>
          <ol class="warning-list">
            <li>구/신 서버의 <strong>GitLab 버전 일치</strong> 확인. 마이너 버전까지 동일해야 한다.</li>
            <li><strong>gitlab-secrets.json</strong> 복사 여부 확인. 빠뜨리면 2FA, CI 변수, Runner 토큰이 전부 무효화된다.</li>
            <li>DNS TTL 변경은 <strong>최소 48시간 전에</strong> 실행. 기존 TTL이 높으면(24시간 등) 전파에 시간이 걸린다.</li>
            <li>복원 후 <strong>gitlab:check</strong>와 <strong>gitlab:doctor:secrets</strong> 두 검증 명령을 반드시 실행한다.</li>
            <li>구 서버를 <strong>최소 1주간 유지</strong>한다. 즉시 폐기하면 롤백이 불가능하다.</li>
            <li>SSL 인증서(Let's Encrypt 등)를 신 서버에서 <strong>재발급</strong>해야 한다. 인증서는 이전되지 않는다.</li>
          </ol>
        </div>
      </section>

    </main>

    <div class="closing">
      <h2>가장 좋은 마이그레이션은<br><strong>아무도 모르게 끝나는 마이그레이션이다</strong></h2>
      <p class="sub">DNS A 레코드 하나면 개발자는 아무것도 할 필요가 없다. 인프라의 존재 이유는 개발자가 코드에만 집중할 수 있게 하는 것이다.</p>
    </div>

    <footer class="footer">
      <p>
        Sources: GitLab Docs &mdash; Backup &amp; Restore (docs.gitlab.com) &middot;
        GitLab Docs &mdash; Docker Backup (docs.gitlab.com) &middot;
        GitLab Docs &mdash; Requirements (docs.gitlab.com) &middot;
        Nick Janetakis &mdash; Zero Downtime Domain Transfer &middot;
        Mike Street &mdash; GitLab Domain Migration
      </p>
      <p>Research assisted by Claude &middot; 2026</p>
    </footer>

  </article>

</div>
</body>
</html>
